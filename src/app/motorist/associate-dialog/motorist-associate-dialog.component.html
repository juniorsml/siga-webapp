<div>
  <sga-modal>
    <div class="admin-dialog">
      <div class="motorist-admin-left-container admin-section">
        <div class="motorist-admin-summary-wrapper">
          <div class="admin-section-header">Resumo</div>
          <div class="motorist-admin-summary">
            <div class="motorist-admin-summary-row" style="border-bottom: 1px solid #cae8ca;">
              <span class="motorist-admin-summary-item">Adicionando</span>
              <span class="motorist-admin-summary-item" style="text-align: center">{{addList.length}}</span>
              <span class="motorist-admin-summary-item" style="margin-left: -2px; width: 94px">Removendo</span>
              <span class="motorist-admin-summary-item" style="text-align: center">{{removeList.length}}</span>
            </div>
            <div class="motorist-admin-summary-row">
              <span class="motorist-admin-summary-total">Total</span>
              <span class="motorist-admin-summary-total">{{ currentList.length + addList.length}}</span>
            </div>
          </div>
        </div>
        <div class="motorist-admin-add-wrapper">
          <div class="admin-section-header">Adicionar Motorista</div>
          <div>
            <sga-auto-complete minLength="3" noSuggestionsText="Nenhum motorista encontrado" url="api/motorist/search?query=" placeholder="Digite o número do documento"
              style="width: 100%;" type="text" (itemSelected)="onMotoristSelected($event)">
              <ng-template let-item="item">
                <div class="autocomplete-suggestion">
                  <span>
                    <img style="width: 30px; height: 20px; float: left; margin: 8px 4px; display: block;" src="{{'/resources/images/flags/' + item.country +'.png'}}"
                      alt="">
                    <img>
                    <span>
                      <span style="font-size: 16px; font-weight: 500; color: #324263; margin-left: 4px;">{{item.documentId}} </span>
                      <span style="font-size: 14px; margin-left: 10px;">{{item.firstName}}, {{item.lastName}}</span>
                    </span>
                  </span>
                </div>
              </ng-template>
            </sga-auto-complete>
          </div>
          <div>
            <list-view [listItems]="addList" styleClass="admin-list motorist-admin-add-list">
              <list-view-item>
                <ng-template let-item="item">
                  <div class="motorist-admin-add-item-valid">
                    <span>({{item.documentId}})</span>
                    <span style="font-weight: 500; margin-left: 8px">{{item.firstName}} {{item.lastName}}</span>
                    <span (click)="undoAddMotorist(item)" class="fa fa-times motorist-admin-item-close" aria-hidden="true"></span>
                  </div>
                </ng-template>
              </list-view-item>
              <list-view-empty>
                <ng-template>
                  <div style="position: absolute; top: 50%; left: 0px; right: 0px; margin-top: -20px;">
                    <i class="fa fa-group" style="color: #e9eaed; width: 100%; text-align: center; font-size: 20px; margin-bottom: 12px;"></i>
                    <span style="width: 100%; text-align: center; display: block; color: #a5abb3; font-size: 12px;">Não há motoristas para adicionar à sua conta</span>
                  </div>
                </ng-template>
              </list-view-empty>
            </list-view>
          </div>
        </div>
        <div class="motorist-admin-remove-wrapper">
          <div class="admin-section-header">Remover Motorista</div>
          <div>
            <list-view [listItems]="removeList" styleClass="admin-list motorist-admin-remove-list">
              <list-view-item>
                <ng-template let-item="item">
                  <div class="motorist-admin-add-item-invalid">
                    <span>({{item.documentId}})</span>
                    <span style="font-weight: 500; margin-left: 8px">{{item.firstName}} {{item.lastName}}</span>
                    <span (click)="undoRemoveMotorist(item)" class="fas fa-times motorist-admin-item-close" aria-hidden="true"></span>
                  </div>
                </ng-template>
              </list-view-item>
              <list-view-empty>
                <ng-template>
                  <div style="position: absolute; top: 50%; left: 0px; right: 0px; margin-top: -20px;">
                    <i class="fa fa-group" style="color: #e9eaed; width: 100%; text-align: center; font-size: 20px; margin-bottom: 12px;"></i>
                    <span style="width: 100%; text-align: center; display: block; color: #a5abb3; font-size: 12px;">Não há motoristas para remover da sua conta</span>
                  </div>
                </ng-template>
              </list-view-empty>
            </list-view>
          </div>
        </div>
        <div style="position: absolute; left: 10px; right: 10px; bottom: 0px;">
          <button (click)="applyChanges()" [disabled]="addList?.length == 0 && removeList?.length == 0" class="custom-button" style="width: 100%; padding: 10px 0px; bottom: 10px">
            aplicar mudanças
          </button>
        </div>

      </div>
      <div class="motorist-admin-right-container admin-section">
        <div class="admin-section-header" style="padding-left: 10px; width: 180px; float: left;">
          Motoristas Associados
        </div>
        <div>
          <div style="width: 360px; margin: 6px 6px 0px 8px; float: right;" class="inner-addon">
            <span class="glyphicons glyphicons-search left-addon"></span>
            <span class="glyphicons glyphicons-remove right-addon"></span>
            <input [(ngModel)]="searchText" placeholder="Buscar" type="text" class="inner-addon-input material-input" />
          </div>

          <div style="top: 70px; position: absolute; left: 4px;  right: 4px; bottom: 0px;">
            <data-table [data]="currentList" [dataLength]="currentList.length" [searchText]="searchText" [searchColumns]="['documentId', 'firstName', 'lastName', 'email', 'cellPhone']"
              [emptySearchText]="'nenhuma motorista foi encontrado'" [bodyBottom]="'42px'" [bodyTop]="'24px'" (onCellClick)="onAdminMotoristCellClick($event)">

              <column [key]="'id'" [header]="''" [minWidth]="'60'" [fixedWidth]="'60'">
                <ng-template let-item="item">
                  <div style="width: 40px; height: 40px; border-radius: 50%; background-color: #eee">
                    <img *ngIf="item !=null" (click)="showMotoristModal(item)" style="width: 40px; height: 40px; border-radius: 50%;" src="{{'api/motorist/public/profileImage?id=' + item}}"
                      alt="">
                  </div>
                </ng-template>
              </column>
              <column [key]="'documentId'" [header]="'ID'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'firstName'" [header]="'Nome'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'lastName'" [header]="'Sobrenome'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'email'" [header]="'Email'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'cellPhone'" [header]="'Celular'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="''" [header]="''" [minWidth]="'60'" [fixedWidth]="'60'">
                <ng-template let-item="item">
                  <span style="color: red; padding: 10px 0px; font-size: 18px;" class="fas fa-times" aria-hidden="true"></span>
                </ng-template>
              </column>
            </data-table>
          </div>
        </div>
      </div>
    </div>

    <!-- <loading-spinner [isHidden]="!isUpdating" text="Aplicando mudanças...">
    </loading-spinner> -->

    <sga-modal *ngIf="!hideAdminErrorModal">
      <div class="admin-error-dialog-overlay">
        <div class="admin-error-dialog">
          <div style="width: 440px; height: 60px; display: inline-block; margin-top: 52px;">
            <span class="fas fa-exclamation-circle" aria-hidden="true" style="font-size: 42px; float: left;">
            </span>
            <span style="width:370px; float: left; margin-left: 26px; margin-top: 12px; text-align: left;">
              {{adminErrorMessage}}
            </span>
          </div>
          <div style="margin: 20px">
            <button #dialogButton (click)="hideAdminErrorModal = !hideAdminErrorModal" class="button-thin">OK
            </button>
          </div>
        </div>
      </div>
    </sga-modal>
  </sga-modal>
</div>