<div class="content-trip-places">

  <div class="places-sidebar">

    <h1>Lugares</h1>
    

    <sga-tabs 
      (tabSelected)="onTabSelected($event)"
      [tabIndex]="selectedTabIndex"
      *ngIf="!showRegister"
      styleClass="tabs no-margin tabs-white">

      <!-- <sga-tab heading="Áreas">
        <sga-grid-control 
          [data]="areas"
          [useContext]="false"
          title="Áreas"
          (onCellRightClick)="onSelectedArea($event)"
          (onContextClick)="onContextMenu($event)"
          (onItemSelected)="onSelected($event)"
          (onRegisterClick)="openRegister('area')">
        </sga-grid-control>
      </sga-tab> -->

      <sga-modal *ngIf="showSelectGroup">
        <sga-modal-group 
          (onCancelDialog)="closeModalGroup()"
          (onSaveDialog)="onSelectedGroupByPlace($event)">
        </sga-modal-group>
      </sga-modal>

      <sga-tab heading="Lugares">
        <sga-grid-control 
          [data]="places"
          [useContext]="false"
          title="Lugares"
          (onCellRightClick)="onSelectedPlace($event)"
          (onContextClick)="onContextMenu($event)"
          (onItemSelected)="onSelected($event)"
          (onRegisterClick)="openRegister('place')">
        </sga-grid-control> 
      </sga-tab>

      <sga-tab heading="Itinerário">
        <!-- <sga-select-grouped 
          [groupedItems]="groupedItems"
          placeholder="Pesquise um lugar ou rota"
          (onSelected)="selectItineraryPlace($event)">
        </sga-select-grouped> -->
        <sga-places-auto-complete
          (onPlacesFilteredEvent)="selectItineraryPlace($event)">

        </sga-places-auto-complete>
        
        <hr>
        <div>
          <div *ngFor="let item of itineraryPlaces; let i = index">
            <p>
              <span class="number-radius">
                {{i + 1}}
              </span>

              {{item.name}}
            </p>
          </div>
        </div>
      </sga-tab>
      
      <sga-tab heading="Grupos">
        <sga-register-group 
          *ngIf="showRegisterGroup"
          [group]="selectedGroup"
          (onBackButton)="closeRegisterGroup()"
          (onPlaceSelected)="onSelected($event)"
          (onRegisterNewItem)="registerNewGroupItem($event)">
        </sga-register-group>

        <sga-grid-control 
          [data]="groups"
          title="Grupos"
          [useContext]="true"
          *ngIf="!showRegisterGroup"
          (onContextClick)="onContextMenu($event)"
          (onItemSelected)="onSelected($event)"
          (onRegisterClick)="openRegister('group')">
        </sga-grid-control>
      </sga-tab>
    </sga-tabs>
    
    <sga-register 
      *ngIf="showRegister"
      [formType]="formType"
      [backParam]="selectedTabIndex"
      (onBackButton)="closeRegister($event)"
      (onPlaceSelected)="onPlaceSelected($event)"
      (onSubmitForm)="create($event)">
    </sga-register>
  </div>

  <div class="places-detail box-shadow">
    <sga-map [showPolygonSquare]="true"></sga-map>
  </div>
</div>
