
<div class="modal-box" [ngClass]="showForm ? 'opened-modal' : ''">
  <div class="container-form content-modal">
    <div class="container-dialog-header columns column is-12 is-marginless">
      <div class="area column is-narrow">
        <h3>Cadastro de Reboque</h3>  
      </div>
      <div class="column btn-close"> 
         <i  (click)="cancel()" class="fal fa-times is-pulled-right"></i>
      </div>      
    </div>
    <div class="container-scroll">    
      
      <form novalidate  (ngSubmit)="onSubmit()"   class="cnt-form" #formTruck="ngForm">
          <sga-tabs 
            [tabIndex]="selectedTabIndex"
            styleClass="tabs no-margin tabs-register">

            <sga-tab heading="Dados do Veículo">

                  <!-- Dados pessoais -->
                  <div class="cnt-info columns">
                    <div class="column input-profile-photo">
                      <div class="control">
                        <div class="file">
                          <label class="file-label">
                            <input class="file-input" type="file" name="resume" (change)="addProfilePhoto($event)">
                            <span class="file-cta">
                              <div>
                                <span class="file-icon">
                                  <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">
                                  Escolha uma <br>   foto...
                                </span>
                              </div>                              
                            </span>
                          </label>
                        </div>
                        <div class="img-profile"> </div>
                        <a class="remove-img-profile" (click)="removeProfilePhoto()">                   
                          <span>Remover Foto</span>
                        </a>
                        
                      </div>
                    </div>


                    <div class="column  is-10">


                      <div class="field-body field">  

                        <div class="field is-4 column is-marginless" >
                          <label class="label is-small">Placa</label>                                                
                          <div class="control">
                            <input  type="text" 
                                    class="input" 
                                    placeholder="Placa" 
                                    name="numberPlate"                   
                                    [(ngModel)]="model.numberPlate"
                                    #numberPlate="ngModel"
                                    [ngClass]="{'is-danger': numberPlate.invalid && (numberPlate.dirty || numberPlate.touched)}"
                                    required>
                                    <div class="form-control-feedback"
                                          *ngIf="numberPlate.errors && (numberPlate.dirty || numberPlate.touched)">
                                         <p class="help is-danger" *ngIf="numberPlate.errors.required">Placa é obrigatório</p>
                                    </div>
                          </div>
                        </div>
                        <div class="field is-4 column is-marginless" >
                          <label class="label is-small">Renavan</label>                                               
                          <div class="control">
                            <input  type="text" 
                                    class="input" 
                                    placeholder="Renavan" 
                                    name="renavan"                  
                                    [(ngModel)]="model.renavan"
                                    #renavan="ngModel"
                                    [ngClass]="{'is-danger': renavan.invalid && (renavan.dirty || renavan.touched)}"
                                    required>
                                    <div class="form-control-feedback"
                                          *ngIf="renavan.errors && (renavan.dirty || renavan.touched)">
                                         <p class="help is-danger" *ngIf="renavan.errors.required">Renavan é obrigatório</p>
                                    </div>
                          </div>
                        </div>
                        <div class="field is-4 column is-marginless" >
                          <label class="label is-small">Marca</label>
                                                
                          <div class="control">                          
                              <input  type="text" 
                                      class="input" 
                                      name="make" 
                                      placeholder="Marca" 
                                      [(ngModel)]="model.make" 
                                      #make="ngModel"
                                      [ngClass]="{'is-danger': make.invalid && (make.dirty || make.touched)}"
                                      required>
                              <div class="form-control-feedback"
                                   *ngIf="make.errors && (make.dirty || make.touched)">
                                   <p class="help is-danger" *ngIf="make.errors.required">Marca é obrigatória</p>
                              </div>
                          </div>
                        </div>  


                      </div>    

                      <div class="field-body field">    

                        <div class="field is-4 column is-marginless" >
                          <label class="label is-small">Modelo</label>
                          <div class="control">                          
                              <input  type="text" 
                                      class="input" 
                                      name="model" 
                                      placeholder="Modelo" 
                                      [(ngModel)]="model.model" 
                                      #model="ngModel"
                                      [ngClass]="{'is-danger': model.invalid && (model.dirty || model.touched)}"
                                      required>
                              <div class="form-control-feedback"
                                   *ngIf="model.errors && (model.dirty || model.touched)">
                                   <p class="help is-danger" *ngIf="model.errors.required">Modelo é obrigatório</p>
                              </div>
                          </div>
                        </div>

                        <div class="field is-4 column is-marginless">
                          <label class="label is-small">Cor</label>                                               
                          <div class="control">                             
                            <div class="select">                      
                              <select  name="colour"
                                       [(ngModel)]="model.colour" 
                                       #colour="ngModel"
                                       [ngClass]="{'is-danger': colour.invalid && (colour.dirty || colour.touched)}"
                                       required>                       
                                <option value="Azul">Azul</option>
                                <option value="Vermelho">Vermelho</option>
                                <option value="Cinza">Cinza</option>
                                <option value="Preto">Preto</option>
                              </select>
                            </div>                   
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="colour.errors && (colour.dirty || colour.touched)">
                              <p class="help is-danger" *ngIf="colour.errors.required">Escolha uma cor</p>
                          </div>
                        </div>

                        <div class="field is-4 column is-marginless" >
                          <label class="label is-small">Ano de Fab.</label>                                                
                          <div class="control">                 
                              <input 
                                     type="text" 
                                     class="input" 
                                     placeholder="Ano de Fab."  
                                     name="year"
                                     [(ngModel)]="model.year"
                                     #year="ngModel"
                                     [ngClass]="{'is-danger': year.invalid && (year.dirty || year.touched)}"
                                     required>
                                     
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="year.errors && (year.dirty || year.touched)">
                              <p class="help is-danger" *ngIf="year.errors.required">Nº é obrigatório</p>
                          </div>
                        </div> 

                       




                      </div>

                      <div class="field-body field">    
                         <div class="field  is-4 column is-marginless">                         
                          <label class="label is-small">Tipo</label>        
                          <div class="control">
                            <div class="select">                            
                            <select [(ngModel)]="model.vehicleType" name="vehicleType" required #vehicleType="ngModel"
                                 [ngClass]="{
                                   'is-danger': vehicleType.invalid && (vehicleType.dirty || vehicleType.touched)
                                  }">
                              <option value="CARRETA ABERTA">CARRETA ABERTA</option>
                              <option value="CARRETA BAU">CARRETA BAU</option>
                              <option value="CARRETA BITREM">CARRETA BITREM</option>
                              <option value="CARRETA ESPECIAL">CARRETA ESPECIAL</option>
                              <option value="CARRETA GRANELEIRA">CARRETA GRANELEIRA</option>
                              <option value="CARRETA SIDER">CARRETA SIDER</option>
                              <option value="CARRETA TRITREM">CARRETA TRITREM</option>
                              <option value="CONTAINER">CARRETA BAU FRIGORIFICA</option>
                              <option value="CARRETA BASCULANTE">CARRETA BASCULANTE</option>
                              <option value="CARRETA SILO">CARRETA SILO</option>
                              <option value="CARRETA TANQUE">CARRETA TANQUE</option>
                            </select>
                            </div>
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="vehicleType.errors && (vehicleType.dirty || vehicleType.touched)">
                              <p class="help is-danger" *ngIf="vehicleType.errors.required">Tipo é obrigatório</p>  
                          </div>
                        </div>
                        <div class="field  is-4 column is-marginless"> 
                          <label class="label is-small">Capacidade</label>    
                          <div class="control">                    
                            <input  type="text" 
                                    class="input" 
                                    placeholder="Capacidade"  
                                    name="capacity"
                                    [(ngModel)]="model.capacity"
                                    #capacity="ngModel"
                                    [ngClass]="{'is-danger': capacity.invalid && (capacity.dirty || capacity.touched) }"
                                    required>

                          </div>
                          <div class="form-control-feedback"
                                *ngIf="capacity.errors && (capacity.dirty || capacity.touched)">
                              <p class="help is-danger" *ngIf="capacity.errors.required">Capacidade é obrigatório</p>
                          </div>
                        </div>
                        <div class="field  is-4 column is-marginless">
                          <label class="label is-small">Nº Frota</label>                          
                          <div class="control">
                            <input  type="text" 
                                    class="input" 
                                    placeholder="Nº Frota"  
                                    name="fleetNumber"
                                    [(ngModel)]="model.fleetNumber"
                                    #fleetNumber="ngModel"
                                    [ngClass]="{'is-danger': fleetNumber.invalid && (fleetNumber.dirty || fleetNumber.touched) }"
                                    required>                        
                          </div>  
                        </div>
                      </div>


                      <div class="field-body field">
                        <div class="field  is-4 column is-marginless">
                          <label class="label is-small">Nº  registro ANTT</label>   
                          <div class="control">
                            <input [(ngModel)]="model.anttNumber"  name="anttNumber" #anttNumber="ngModel" class="input" type="text" placeholder="Nº  registro ANTT">
                          </div>
                        </div>

                        <div class="field  is-4 column is-marginless">
                          <label class="label is-small">Validade ANTT</label>  
                          <div class="control">
                            <input  type="date" 
                                    class="input" 
                                    placeholder="Validade ANT" 
                                    name="anttDueDate"
                                    [(ngModel)]=model.anttDueDate
                                    #anttDueDate="ngModel"
                                    [ngClass]="{'is-danger': anttDueDate.invalid && (anttDueDate.dirty || anttDueDate.touched)}" 
                                    required> 
                            
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="anttDueDate.errors && (anttDueDate.dirty || anttDueDate.touched)">
                              <p class="help is-danger" *ngIf="anttDueDate.errors.required">Validade ANT é obrigatória</p>
                          </div>
                        </div>

                      
                   

                        
                       
                      </div>
                      <div class="field-body field">
                        <div class="field is-6 column is-marginless">
                          
                          <label class="label is-small">Tecnologia Rastreador</label>   
                          <div class="control">
                            <div class="select">
                              <select [(ngModel)]="model.tech" 
                                      name="tech"
                                      #tech="ngModel"
                                      [ngClass]="{'is-danger': tech.invalid && (tech.dirty || tech.touched)}"
                                      required>                               
                                <option value="OMNILINK">OMNILINK</option> 
                                <option value="AUTOTRAC">AUTOTRAC</option>
                              </select>
                            </div>
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="tech.errors && (tech.dirty || tech.touched)">
                              <p class="help is-danger" *ngIf="tech.errors.required">Tecnologia é obrigatório</p>
                          </div>
                        </div>
                        <div class="is-6 column is-marginless">
                          
                          <label class="label is-small">Comunicação</label>   
                          <div class="control">
                            <div class="select">
                              <select [(ngModel)]="model.comunication" 
                                      #comunication="ngModel"
                                      name="comunication"
                                      [ngClass]="{'is-danger': comunication.invalid && (comunication.dirty || comunication.touched)}"
                                      required>                               
                                <<option value="GPS/GPRS">GPS/GPRS</option>
                                <option value="GPS/DUPLO GPRS">GPS/DUPLO GPRS</option>
                                <option value="GPS/GPRS+SATÉLITE">GPS/GPRS+SATÉLITE</option>
                                <option value="GPS/SATÉLITE">GPS/SATÉLITE</option>
                                <option value="GPS/GPRS GLOBAL">GPS/GPRS GLOBAL</option>
                                <option value="RF/GPS/GPRS">RF/GPS/GPRS</option>
                              </select>
                            </div>
                          </div>
                          <div class="form-control-feedback"
                                *ngIf="comunication.errors && (comunication.dirty || comunication.touched)">
                              <p class="help is-danger" *ngIf="comunication.errors.required">Vínculo é obrigatório</p>
                          </div>
                        </div>
                      </div>
                      
                    </div>

                  </div>

            </sga-tab>

            <sga-tab heading="Dados do Proprietário">
              <!-- Endereço -->
                  <div class="cnt-info columns" style="align-items: flex-start;">
                    
                  
                    <div class="columns column is-multiline">
                     

                      <div class="column is-12">
                        <div class="control">
                          <label class="label is-small">Nome</label>  
                          <input  type="text"
                                  class="input" 
                                  placeholder="Nome"  
                                  name="ownerName"
                                  [(ngModel)]="model.ownerName" required #ownerName="ngModel"
                                  [ngClass]="{'is-danger': ownerName.invalid && (ownerName.dirty || ownerName.touched)}">
                        </div>
                        <div class="form-control-feedback"
                              *ngIf="ownerName.errors && (ownerName.dirty || ownerName.touched)">
                            <p class="help is-danger" *ngIf="ownerName.errors.required">Nome é obrigatório</p>
                        </div>
                      </div>              

                      <div class="column is-3">
                        <div class="control">
                          <label class="label is-small">Documento</label>  
                          <div class="select">
                            <select name="ownerDocumentType" [(ngModel)]="model.ownerDocumentType" #ownerDocumentType="ngModel" [ngClass]="{'is-danger': ownerDocumentType.invalid && (ownerDocumentType.dirty || ownerDocumentType.touched)}"
                              required>
                              <option value="RG">RG</option>
                              <option value="CPF">CPF</option>
                              <option value="RNA">RNA</option>
                              <option value="Passaporte">Passaporte</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-control-feedback" *ngIf="ownerDocumentType.errors && (ownerDocumentType.dirty || ownerDocumentType.touched)">
                          <p class="help is-danger" *ngIf="ownerDocumentType.errors.required">Escolha um documento</p>
                        </div>
                      </div>

                      <div class="column is-9">
                        <label class="label is-small">Nº</label>
                        <div class="control">
                          <input  [disabled]="ownerDocumentType.invalid" 
                                  type="text" 
                                  class="input" 
                                  placeholder="Nº" 
                                  name="ownerDocument" 
                                  [(ngModel)]="model.ownerDocument"
                                  #ownerDocument="ngModel" 
                                  [ngClass]="{'is-danger': ownerDocument.invalid && (ownerDocument.dirty || ownerDocument.touched)}"
                            required>

                        </div>
                        <div class="form-control-feedback" *ngIf="ownerDocument.errors && (ownerDocument.dirty || ownerDocument.touched)">
                          <p class="help is-danger" *ngIf="ownerDocument.errors.required">Nº é obrigatório</p>
                        </div>
                       
                       
                      </div>
                      <div class="column is-6">
                        <div class="control">
                          <label class="label is-small">Telefone</label>
                          <input type="text" [textMask]="{mask: landlinephone}" class="input" placeholder="Telefone" name="ownerPhone" [(ngModel)]="model.ownerPhone"
                            required #ownerPhone="ngModel" [ngClass]="{'is-danger': ownerPhone.invalid && (ownerPhone.dirty || ownerPhone.touched)}">
                        </div>
                        <div class="form-control-feedback" *ngIf="ownerPhone.errors && (ownerPhone.dirty || ownerPhone.touched)">
                          <p class="help is-danger" *ngIf="ownerPhone.errors.required">Telefone é obrigatório</p>
                        </div>
                      </div>

                      <div class="column is-6">
                        <div class="control">
                          <label class="label is-small">Celular</label>
                          <input type="text" [textMask]="{mask: mobilephone}" class="input" placeholder="Celular" name="ownerCellPhone" [(ngModel)]="model.ownerCellPhone"
                            #ownerCellPhone="ngModel" [ngClass]="{'is-danger': ownerCellPhone.invalid && (ownerCellPhone.dirty || ownerCellPhone.touched)}" required>
                        </div>
                        <div class="form-control-feedback" *ngIf="ownerCellPhone.errors && (ownerCellPhone.dirty || ownerCellPhone.touched)">
                          <p class="help is-danger" *ngIf="ownerCellPhone.errors.required">Celular é obrigatório</p>
                        </div>
                      </div>


                      <div class="column is-12">
                        <label class="label is-small">Endereço/Região</label>  
                        <sga-places-auto-complete  
                          [keepTextAddress]="true"
                          (onPlacesFilteredEvent)="placesFiltered($event)" 
                          (onFilterRemovedEvent)="filterRemoved()">
                        </sga-places-auto-complete>
                      </div>
                      <div class="column is-3">
                          <div class="control">
                            <label class="label is-small">Número</label>
                            <input type="text"  class="input" placeholder="Número" name="number" [(ngModel)]="model.number"
                              required #number="ngModel" [ngClass]="{'is-danger': number.invalid && (number.dirty || number.touched)}">
                          </div>
                          <div class="form-control-feedback" *ngIf="number.errors && (number.dirty || number.touched)">
                            <p class="help is-danger" *ngIf="number.errors.required">Núumero é obrigatório</p>
                          </div>
                        </div>
                      <div class="column is-9">
                          <div class="control">
                            <label class="label is-small">Complemento</label>
                            <input type="text"  class="input" placeholder="Número" name="complement" [(ngModel)]="model.complement"
                               #complement="ngModel" [ngClass]="{'is-danger': complement.invalid && (complement.dirty || complement.touched)}">
                          </div>
                        </div>

                      <div class="column is-12">
                        <div class="control">
                          <label class="label is-small">Raio</label>
                          <input 
                            type="number" 
                            class="input is-small" 
                            [(ngModel)]="ra"
                            (ngModelChange)="onRayChanged($event)"
                            placeholder="Raio"
                            name="radius" 
                            ngModel />
                        </div>
                      </div>
                      
                    </div>
                    <div class="columns column  is-multiline">
                              
                       <div class="column is-12 map"> 
                        <sga-map></sga-map>
                      </div>            
                    </div>
                    

                    
                </div>
              </sga-tab>

            
        </sga-tabs>
            <!-- Botões de Ação -->
        <div class="cnt-buttons">
        
            
              <button class="button" (click)="cancel()">Cancelar</button>
            
                  
              <button type="submit"
                      class="button is-first"
                      [disabled]="formTruck.invalid">Cadastrar
              </button>
            
          
        </div>
      </form>
  
    </div>
  </div>
</div>