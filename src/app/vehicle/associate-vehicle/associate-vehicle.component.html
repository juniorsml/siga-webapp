<div>
    <div class="admin-dialog">
      <div class="motorist-admin-left-container columns is-multiline is-marginless ">
        <div class="motorist-admin-summary-wrapper column is-12 is-marginless">
          <div class="admin-section-header">Resumo</div>
          <div class="motorist-admin-summary">
            <div class="motorist-admin-summary-row columns is-marginless">
              <span class="column is-3">Adicionando</span>
              <span class="column is-narrow is-centered">{{addList.length}}</span>
              <span class="column is-3">Removendo</span>
              <span class="column is-3 is-narrow is-centered">{{removeList.length}}</span>
            </div>
            <div class="motorist-admin-summary-row columns is-marginless">
              <span class=" column is-half">Total</span>
              <span class="column is-half is-centered">{{ currentList.length + addList.length}}</span>
            </div>
          </div>
        </div>

        <div class="motorist-admin-wrapper motorist-admin-add-wrapper column is-12 is-marginless">
          <div class="wrapper-header">Adicionar Veículo</div>
          <div class="cnt-autocomplete">
            <sga-auto-complete 
              [data]="vehicles"
              [propToFilter]="'vehiclePlate'"
              minLength="3"
              styleClass = "autocomplete"
              noSuggestionsText="Nenhum Veículo encontrado"
              url="api/vehicle/search?query="
              placeholder="Digite o número do documento"
              style="width: 100%;"
              type="text"
              (onCreateNew)="showVehicleForm($event)"
              (itemSelected)="onVehicleSelected($event)">
              <ng-template let-item="item">
                <div class="autocomplete-suggestion">
                  <span>
                    <img class="img-autocomplete" src="{{'/assets/images/flags/' + item.country +'.png'}}"
                      alt="">
                    <img>
                    <span>
                      <span style="font-size: 16px; font-weight: 500; color: #324263; margin-left: 4px;">{{item.vehiclePlate}} </span>
                      <span style="font-size: 14px; margin-left: 10px;">{{item.model}}</span>
                    </span>
                  </span>
                </div>
              </ng-template>
            </sga-auto-complete>
          </div>
          <div class="cnt-list-view column is-12">
            <list-view [listItems]="addList" styleClass="admin-list motorist-admin-add-list">
              <list-view-item>
                <ng-template let-item="item">
                  <div class="motorist-admin-add-item-valid">
                    <span>({{item.vehiclePlate}})</span>
                    <span style="font-weight: 500; margin-left: 8px">{{item.vehiclePlate}}</span>
                    <span (click)="undoAddVehicle(item)" class="fa fa-times motorist-admin-item-close" aria-hidden="true"></span>
                  </div>
                </ng-template>
              </list-view-item>
              <list-view-empty>
                <ng-template>
                  <div class="list-view-empty">
                    <i class="fa fa-group"></i>
                    <span>Não há Veículos para adicionar à sua conta</span>
                  </div>
                </ng-template>
              </list-view-empty>
            </list-view>
          </div>
        </div>

        <div class="motorist-admin-wrapper motorist-admin-remove-wrapper column is-12 is-marginless">
          <div class="wrapper-header">Remover Veículo</div>
          <div class="cnt-list-view ">
            <list-view [listItems]="removeList" styleClass="admin-list motorist-admin-remove-list">
              <list-view-item>
                <ng-template let-item="item">
                  <div class="motorist-admin-add-item-invalid">
                    <span>({{item.vehiclePlate}})</span>
                    <span style="font-weight: 500; margin-left: 8px">{{item.vehiclePlate}}</span>
                    <span (click)="undoRemoveVehicle(item)" class="fas fa-times motorist-admin-item-close" aria-hidden="true"></span>
                  </div>
                </ng-template>
              </list-view-item>
              <list-view-empty>
                <ng-template>
                  <div class="list-view-empty">
                    <i class="fa fa-group"></i>
                    <span>Não há veículos para remover da sua conta</span>
                  </div>
                </ng-template>
              </list-view-empty>
            </list-view>
          </div>
        </div>

        <div class="cnt-custom-button column is-12 is-marginless">
          <button 
          (click)="applyChanges()" 
          [disabled]="addList?.length == 0 && removeList?.length == 0" 
          class="custom-button" >
            aplicar mudanças
          </button>
        </div>

      </div>
      <div class="motorist-admin-right-container columns is-multiline is-marginless ">
        <div class="title column">
          Veículos Associados
        </div>
        <div class="cnt-btn-search">       
           <p class="control has-icons-left"> 
              <input  [(ngModel)]="searchText" class="input"  placeholder="Buscar" type="text"/>
              <span class="icon is-small is-left">
                <i class="fa fa-search"></i>
              </span>       
            </p>
        </div>
        <div>
          <div class="grid-associate">
            <data-table 
              [data]="currentList"
              [dataLength]="currentList.length"
              [searchText]="searchText"
              [searchColumns]="['vehiclePlate', 'renavan', 'brand', 'model']"
              [emptySearchText]="'nenhuma veículo foi encontrado'"
              [bodyBottom]="'42px'"
              [bodyTop]="'24px'"
              (onCellClick)="onAdminVehicleCellClick($event)">

              <column [key]="'id'" [header]="''" [minWidth]="'60'" [fixedWidth]="'60'">
                <ng-template let-item="item">
                  <div class="cnt-img">
                    <img *ngIf="item !== null" (click)="showVehicleModal(item)" style="width: 40px; height: 40px; border-radius: 50%;" src="{{'api/motorist/public/profileImage?id=' + item}}"
                      alt="">
                  </div>
                </ng-template>
              </column>
              <column [key]="'vehiclePlate'" [header]="'ID'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'renavan'" [header]="'Nome'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'brand'" [header]="'Sobrenome'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              <column [key]="'model'" [header]="'Email'" [minWidth]="'82'">
                <ng-template let-item="item">
                  {{item}}
                </ng-template>
              </column>
              
              <column [key]="''" [header]="''" [minWidth]="'60'" [fixedWidth]="'60'">
                <ng-template let-item="item">
                  <span style="color: red; padding: 10px 0px; font-size: 18px;" class="fas fa-times" aria-hidden="true"></span>
                </ng-template>
              </column>
            </data-table>
          </div>
        </div>
      </div>
    </div>

    <!-- <loading-spinner [isHidden]="!isUpdating" text="Aplicando mudanças...">
    </loading-spinner> -->

   <sga-modal>
      <sga-register-vehicle
        [showForm]="showVehicleRegister"
        (onFormClose)="vehicleFormClose()">
      </sga-register-vehicle>
    </sga-modal>

    <sga-modal>
      <sga-dialog-vehicle
        [showDialog]="showVehicleDialog"
        [selectedVehicle]="selectedVehicle"
        (onDialogClose)="vehicleDialogClose()">
      </sga-dialog-vehicle>
    </sga-modal>
  
</div>